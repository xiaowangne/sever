/* empty css                  *//* empty css                 */import{_ as e}from"./Back.vue_vue&type=style&index=0&lang.1aea6dd8.js";import"./el-form-item.c6f666bf.js";import{f as a,w as t,x as s,g as o,h as l,j as r,J as n,y as u,z as d,a9 as i,aa as p,A as m,B as c,o as g,m as y,D as f,n as h,F as v,H as w,t as b}from"./vendor.555231f0.js";/* empty css                */const _={class:"create-type-section"},C={class:"create-type-form"},x=w("正常"),B=w("冻结");var V=a({name:"BannerType",setup(a){const{proxy:V}=t(),T=s();V.$serverUrl;const j=o("default"),k=o(),L=l({title:"",description:"",status:"0"}),J=o({}),N=o();r((()=>{let e=T.currentRoute.value.query.typeId;e&&(N.value=e,z())}));const S=l({title:[{required:!0,message:"请输入分类名称",trigger:"blur"}]}),U=e=>{const a=new FormData;for(let t in e)a.append(t,e[t]);return a};let $={headers:{token:document.cookie,"Content-Type":"multipart/form-data"}};const z=()=>{V.$axios.get("/getBannerType",{params:{typeId:N.value},headers:{token:document.cookie}}).then((e=>{if(1041==e.data.status)return n({showClose:!0,message:e.data.msg,type:"error"}),T.push({name:"Login"});if(1260==e.data.status){n({showClose:!0,message:e.data.msg,type:"success"});let a=e.data.data[0];L.title=a.title,L.description=a.description,L.status=Number(a.status).toString(),J.value=JSON.parse(JSON.stringify(L))}else n({showClose:!0,message:e.data.msg,type:"error"})})).catch((e=>{console.log("error",e)}))};let D={};const F=async e=>{if(!e)return;let a=U(L);await e.validate(((e,t)=>{var s,o;e?N.value?(e=>{for(let t in L)J.value[t]!=L[t]&&(D[t]=L[t]);if("{}"==JSON.stringify(D))return T.push({name:"BannerTypeList"});D.typeId=N.value;let a=U(D);V.$axios.post("/editBannerType",a,e).then((e=>1041==e.data.status?(n({showClose:!0,message:e.data.msg,type:"error"}),T.push({name:"Login"})):1250==e.data.status?(n({showClose:!0,message:e.data.msg,type:"success"}),T.push({name:"BannerTypeList"})):void n({showClose:!0,message:e.data.msg,type:"error"}))).catch((e=>{console.log("error",e)}))})($):(s=a,o=$,V.$axios.post("/createBanType",s,o).then((e=>1041==e.data.status?(n({showClose:!0,message:e.data.msg,type:"error"}),T.push({name:"Login"})):1220==e.data.status?(n({showClose:!0,message:e.data.msg,type:"success"}),T.push({name:"BannerTypeList"})):void n({showClose:!0,message:e.data.msg,type:"error"}))).catch((e=>{console.log("error",e)}))):console.log("error submit!",t)}))};return(a,t)=>{const s=u,o=d,l=i,r=p,n=m,V=c;return g(),y("div",_,[f(e,{title:"添加轮播图分类"}),h("div",C,[f(V,{ref_key:"typeDataRef",ref:k,model:L,rules:S,"label-width":"120px",class:"demo-ruleForm",size:j.value,"status-icon":""},{default:v((()=>[f(o,{label:"轮播图类型名称",prop:"title"},{default:v((()=>[f(s,{modelValue:L.title,"onUpdate:modelValue":t[0]||(t[0]=e=>L.title=e),placeholder:"输入类型名称"},null,8,["modelValue"])])),_:1}),f(o,{label:"描述"},{default:v((()=>[f(s,{modelValue:L.description,"onUpdate:modelValue":t[1]||(t[1]=e=>L.description=e),type:"textarea"},null,8,["modelValue"])])),_:1}),f(o,{label:"状态"},{default:v((()=>[f(r,{modelValue:L.status,"onUpdate:modelValue":t[2]||(t[2]=e=>L.status=e)},{default:v((()=>[f(l,{label:"0"},{default:v((()=>[x])),_:1}),f(l,{label:"1"},{default:v((()=>[B])),_:1})])),_:1},8,["modelValue"])])),_:1}),f(o,null,{default:v((()=>[f(n,{type:"primary",onClick:t[3]||(t[3]=e=>F(k.value))},{default:v((()=>[w(b(N.value?"保存":"创建分类"),1)])),_:1})])),_:1})])),_:1},8,["model","rules","size"])])])}}});export{V as default};
