/* empty css                  */import{t as a}from"./tool.8164259c.js";/* empty css               */import{f as e,x as t,w as s,g as o,j as l,a3 as r,A as d,a6 as n,o as u,m as i,n as p,D as c,F as y,I as m,a8 as h,J as f,H as g,t as v,c as w}from"./vendor.555231f0.js";const k={class:"type-list"},C={class:"seach-section"},b={class:"create-type"},_=g("添加轮播图分类"),I=g("删除选择"),T={class:"type-list-table"},x=p("img",{src:"./assets/nopic.805d5221.png"},null,-1),A=g("编辑 "),j=g("启用 "),z=g("冻结 "),B=g("删除 ");var L=e({name:"BannerTypeList",setup(e){const L=t(),{proxy:M}=s();M.$serverUrl;const $=o([]),D=o([]);l((()=>{S()}));const E=r((()=>$.value.length>0)),S=()=>{M.$axios.get("/bannerType",{headers:{token:document.cookie}}).then((e=>{if(1041==e.data.status)return L.push({name:"Login"});1230==e.data.status&&(e.data.data.forEach((e=>{e.createdAt=a.formatDate(e.createdAt,"yyyy-MM-dd hh:mm:ss"),e.updatedAt=a.formatDate(e.updatedAt,"yyyy-MM-dd hh:mm:ss")})),D.value=e.data.data)})).catch((a=>{console.log("error",a)}))},q=a=>{M.$axios({method:"post",url:"/banTypeStatus",data:{typeId:a.typeId,status:0==a.status?1:0},headers:{token:document.cookie}}).then((e=>{if(1041==e.data.status)return L.push({name:"Login"});1240==e.data.status&&1==e.data.data.result[0]?(f({message:e.data.msg,showClose:!0,type:"success"}),a.status=e.data.data.status):f({message:e.data.msg,type:"error",showClose:!0})})).catch((a=>{console.log("err ==> ",a)}))},F=a=>{$.value=[],a.forEach((a=>{$.value.push(a.typeId)}))},H=a=>{M.$axios({method:"post",url:"/removeType",data:{typeIds:a,type:"BannerType"},headers:{token:document.cookie}}).then((a=>{if(1041==a.data.status)return L.push({name:"Login"});1100==a.data.status?(f({message:a.data.msg,showClose:!0,type:"success"}),D.value=[],S()):f({message:a.data.msg,type:"error",showClose:!0})})).catch((a=>{console.log("err ==> ",a)}))},J=()=>{H($.value)},R=()=>{L.push({name:"BannerType"})};return(a,e)=>{const t=d,s=n;return u(),i("div",k,[p("div",C,[p("div",b,[c(t,{type:"primary",onClick:R},{default:y((()=>[_])),_:1}),c(t,{type:"danger",disabled:!m(E),onClick:J},{default:y((()=>[I])),_:1},8,["disabled"])])]),p("div",T,[c(m(h),{ref:"multipleTableRef",data:D.value,onSelectionChange:F},{default:y((()=>[c(s,{type:"selection",width:"55"}),c(s,{property:"title",label:"名称",width:"120"}),c(s,{property:"status",label:"状态",width:"120","show-overflow-tooltip":""},{default:y((a=>[g(v(0==a.row.status?"正常":"冻结"),1)])),_:1}),c(s,{label:"更新时间",width:"180"},{default:y((a=>[g(v(a.row.createdAt),1)])),_:1}),c(s,{label:"图片",width:"180"},{default:y((a=>[x])),_:1}),c(s,{label:"操作"},{default:y((a=>[c(t,{size:"small",type:"default",plain:"",onClick:e=>{return t=a.row.typeId,void L.push({name:"BannerType",query:{typeId:t}});var t}},{default:y((()=>[A])),_:2},1032,["onClick"]),1==a.row.status?(u(),w(t,{key:0,size:"small",type:"success",plain:"",onClick:e=>q(a.row)},{default:y((()=>[j])),_:2},1032,["onClick"])):(u(),w(t,{key:1,size:"small",type:"warning",plain:"",onClick:e=>q(a.row)},{default:y((()=>[z])),_:2},1032,["onClick"])),c(t,{size:"small",type:"danger",plain:"",onClick:e=>{return t=a.row.typeId,void H([t]);var t}},{default:y((()=>[B])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])])])}}});export{L as default};
